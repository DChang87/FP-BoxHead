import java.awt.Font;
import java.awt.Graphics;
import java.awt.TextField;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.awt.Image;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.io.Writer;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Scanner;

import javax.swing.ImageIcon;
import javax.swing.JPanel;
public class HighScore extends JPanel implements KeyListener{
	private static int mouseX,mouseY;
	private Image background = new ImageIcon("hsBackground.jpg").getImage();
	private boolean Down=false;
	private ArrayList<Integer> list= new ArrayList<Integer>();
	BoxHead BH;
	private boolean[] keys;
	private Font font = new Font("Impact", Font.PLAIN, 40);
	public HighScore(BoxHead b){
		keys = new boolean[65535];
		addKeyListener(this);
		System.out.println("public high score");
		BH=b;
		setSize(800,640);
	}
	public void loadList(){
		Scanner infile = null;
		list.clear();
		try{
			infile = new Scanner(new File("high_score.txt"));
			for (int i=0;i<10;i++){
				list.add(Integer.parseInt(infile.nextLine()));
			}
		}
		catch(IOException ex){}
		
	} 
    public void writeToFile(){
    	Writer writer = null;
    	try{
    		FileWriter outfile = new FileWriter(new File("high_score.txt"));
    		for (int i=0;i<list.size();i++){
        		outfile.write(list.get(i)+"\n");
        	}
    		outfile.close();
    	}
    	catch(IOException ex){}
    }
    public boolean collide(int x,int y,int w, int l){
		return x<=mouseX&&x+w>=mouseX&&y<=mouseY&&y+l>=mouseY;
	}
    public void addScore(int score){
    	list.add(score);
    	ArrayList<Integer> toSort = new ArrayList<Integer>();
    	for (int i=0;i<list.size();i++){
    		toSort.add(list.get(i));
    	}
    	list.clear();
    	Collections.sort(toSort);
    	for (int i=toSort.size()-1;i>=toSort.size()-10;i--){
    		list.add(toSort.get(i));
    	}
    	writeToFile();
    }
    public void keyPressed(KeyEvent e) {keys[e.getKeyCode()]=true;}
	public void keyReleased(KeyEvent e) {keys[e.getKeyCode()]=false;}
	public void keyTyped(KeyEvent arg0) {}
    
    public void paintComponent(Graphics g){
    	g.setFont(font);
    	g.drawImage(background,0,0,this);
    	if (keys[KeyEvent.VK_SPACE]){
    		BH.state=BH.OVER;
    		System.out.println("back togame over");
    		list.clear();
    		//BH.go.activateMouse();
    		BH.go.requestFocus();
    		keys[KeyEvent.VK_SPACE]=false;
    	}
    	for (int i=0;i<list.size();i++){
    		g.drawString(i+".            "+list.get(i)+"", 300, 180+i*40);
    		//because who counts starting from 1 anyways
    		
    	}
    }	
}
